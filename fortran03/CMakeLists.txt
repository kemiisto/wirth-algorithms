cmake_minimum_required(VERSION 2.8)
project(wirth_algorithms)
enable_language(Fortran)

set(CMAKE_Fortran_FLAGS_DEBUG "${CMAKE_Fortran_FLAGS_DEBUG} -O0")

# Turns all warnings into errors.
set(CMAKE_Fortran_FLAGS_DEBUG "${CMAKE_Fortran_FLAGS_DEBUG} -Werror")

# -Wall currently includes (as of GCC 4.9.2)
# -Waliasing
# -Wampersand
# -Wc-binding-type
# -Wconversion
# -Wintrinsic-shadow
# -Wintrinsics-std
# -Wline-truncation
# -Wno-tabs
# -Wreal-q-constant
# -Wsurprising
# -Wtarget-lifetime
# -Wunused
set(CMAKE_Fortran_FLAGS_DEBUG "${CMAKE_Fortran_FLAGS_DEBUG} -Wall")

# -Wextra currently includes (as of GCC 4.9.2)
# -Wcompare-reals
# -Wunused-parameter
set(CMAKE_Fortran_FLAGS_DEBUG "${CMAKE_Fortran_FLAGS_DEBUG} -Wextra")

# Warn about array temporaries generated by the compiler.
# The information generated by this warning is sometimes useful in optimization,
# in order to avoid such temporaries.
set(CMAKE_Fortran_FLAGS_DEBUG "${CMAKE_Fortran_FLAGS_DEBUG} -Warray-temporaries")

# Warn when a character assignment will truncate the assigned string.
set(CMAKE_Fortran_FLAGS_DEBUG "${CMAKE_Fortran_FLAGS_DEBUG} -Wcharacter-truncation")

# Warn about implicit conversions between different types and kinds.
set(CMAKE_Fortran_FLAGS_DEBUG "${CMAKE_Fortran_FLAGS_DEBUG} -Wconversion-extra")

# Warn if a procedure is called without an explicit interface. 
set(CMAKE_Fortran_FLAGS_DEBUG "${CMAKE_Fortran_FLAGS_DEBUG} -Wimplicit-interface")

# Warn if a procedure is called that has neither an explicit interface 
# nor has been declared as EXTERNAL.
set(CMAKE_Fortran_FLAGS_DEBUG "${CMAKE_Fortran_FLAGS_DEBUG} -Wimplicit-procedure")

# Produce a warning when numerical constant expressions are encountered, 
# which yield an UNDERFLOW during compilation.
set(CMAKE_Fortran_FLAGS_DEBUG "${CMAKE_Fortran_FLAGS_DEBUG} -Wunderflow")

set(CMAKE_Fortran_FLAGS_DEBUG "${CMAKE_Fortran_FLAGS_DEBUG} -fimplicit-none")
set(CMAKE_Fortran_FLAGS_DEBUG "${CMAKE_Fortran_FLAGS_DEBUG} -fbounds-check")
set(CMAKE_Fortran_FLAGS_DEBUG "${CMAKE_Fortran_FLAGS_DEBUG} -fbacktrace")
set(CMAKE_Fortran_FLAGS_DEBUG "${CMAKE_Fortran_FLAGS_DEBUG} -ffpe-trap=zero")
set(CMAKE_Fortran_FLAGS_DEBUG "${CMAKE_Fortran_FLAGS_DEBUG} -fmax-errors=1")
set(CMAKE_Fortran_FLAGS_DEBUG "${CMAKE_Fortran_FLAGS_DEBUG} -std=f2003 -pedantic-errors")

add_subdirectory(ch01)
